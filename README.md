# shop21INIT

## Описание
Папка с конфигурацией для развертывания всего проекта Shop21 через Docker Compose.
p.s. проект будет разрабатываться дальше на локальном репозитории школы21.(коммиты будут не часто)

## Структура
- `docker-compose.yml` - основной файл конфигурации Docker Compose для всех сервисов
- `nginx/` - конфигурация и файлы Nginx сервера

### Базы данных
- **postgres** (порт 10009) - БД для API сервиса
- **postgres_auth** (порт 10010) - БД для сервиса аутентификации

### Приложения
- **shop21auth** (порт 8081, gRPC 9090) - сервис аутентификации
- **shop21api** (порт 10000) - основной API сервис
- **shop21api_read1** (порт 10001) - реплика API для чтения
- **shop21api_read2** (порт 10002) - реплика API для чтения
- **shop21ui** (порт 10011) - пользовательский интерфейс

### Инфраструктура
- **nginx** (порты 10006/HTTP, 10007/HTTPS) - обратный прокси и балансировщик нагрузки
- **pgadmin** (порт 10008) - веб-интерфейс для управления PostgreSQL

## Запуск

### Запуск всех сервисов
Необходимо склонировать все проекты приложения shop21 в одну папку. (пока так)
```bash
docker compose up -d
```

### Остановка всех сервисов
```bash
docker compose down
```

### Просмотр логов
```bash
docker compose logs -f [имя_сервиса]
```

### Пересборка контейнеров
```bash
docker compose up -d --build
```

## Доступ к сервисам
- API: http://localhost:10006 (редирект на https)
- API HTTPS: https://localhost:10007
- UI: http://localhost:10011
- PgAdmin: http://localhost:10008 (admin@admin.com / admin)

## Сеть
Все сервисы работают в единой сети `shop-network` типа bridge.

## Домен
Можно создать локальный домен через скрипт create-domain (но оно никому и не надо).
